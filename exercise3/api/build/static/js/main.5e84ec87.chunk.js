(this["webpackJsonpexercise2.4"]=this["webpackJsonpexercise2.4"]||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(13),i=n.n(c),s=n(16),o=n(14),d=n(15),u=n(18),l=n(17),h=n(3),j=n.n(h),m="/api/reminders",b=function(){return j.a.get(m).then((function(e){return e.data}))},f=function(e,t){var n=Date.parse(t),a={name:e,timestamp:(isNaN(n)?new Date:new Date(n)).toISOString()};return j.a.post(m,a).then((function(e){return e.data}))},O=function(e){return j.a.delete("".concat(m,"/").concat(e)).then((function(e){return 200===e.status||204===e.status})).catch((function(){return!1}))},x=n(0),w=function(e){var t=e.reminder,n=e.deletionHandler,a=new Date(t.timestamp),r="".concat(a.toLocaleString());return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{style:{width:"1px",whiteSpace:"nowrap",color:"grey"},children:Object(x.jsx)("i",{children:r})}),Object(x.jsx)("td",{children:t.name}),Object(x.jsx)("td",{children:Object(x.jsx)("button",{className:"delete-btn",onClick:function(){return n(t.id)},children:"Poista"})})]})},p=function(e){var t=e.submitHandler,n=e.nameChangeHandler,a=e.dateChangeHandler,r=e.nameValue,c=e.dateValue;return Object(x.jsx)("form",{onSubmit:t,children:Object(x.jsx)("table",{children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Aihe:"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{value:r,onChange:n})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"P\xe4iv\xe4m\xe4\xe4r\xe4:"}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{value:c,onChange:a,type:"datetime-local"})})]}),Object(x.jsx)("tr",{children:Object(x.jsx)("td",{colSpan:2,children:Object(x.jsx)("button",{type:"submit",children:"Lis\xe4\xe4"})})})]})})})},g=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).addReminder=function(e){e.preventDefault(),a.state.reminders.some((function(e){return e.name===a.state.newName}))?alert("T\xe4\xe4 on olemassa jo!"):f(a.state.newName,a.state.newDate).then((function(e){a.setState((function(t){return{reminders:[].concat(Object(s.a)(t.reminders),[e]),newName:"",newDate:""}})),console.log("Reminder with id: ".concat(e.id," successfully created"))})).catch((function(e){console.log("Could not create a reminder: ".concat(e))}))},a.onNameChange=function(e){a.setState({newName:e.target.value})},a.onDateChange=function(e){a.setState({newDate:e.target.value})},a.onReminderDelete=function(e){window.confirm("Ootko ihan varma?")&&O(e).then((function(t){t?(a.setState((function(t){return{reminders:t.reminders.filter((function(t){return t.id!==e}))}})),console.log("Reminder with id: ".concat(e," successfully deleted"))):console.log("Reminder with id: ".concat(e," could not be deleted"))}))},a.state={reminders:[],newName:"",newDate:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;b().then((function(t){e.setState({reminders:t})}))}},{key:"render",value:function(){var e=this;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Lis\xe4\xe4 muistutus"}),Object(x.jsx)(p,{submitHandler:this.addReminder,nameChangeHandler:this.onNameChange,dateChangeHandler:this.onDateChange,nameValue:this.state.newName,dateValue:this.state.newDate}),Object(x.jsx)("h2",{children:"Muistutukset"}),Object(x.jsx)("table",{style:{width:"500px"},children:Object(x.jsx)("tbody",{children:this.state.reminders.map((function(t){return Object(x.jsx)(w,{reminder:t,deletionHandler:e.onReminderDelete},t.id)}))})})]})}}]),n}(r.a.Component);n(42);i.a.render(Object(x.jsx)(g,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.5e84ec87.chunk.js.map